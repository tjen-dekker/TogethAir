<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="/templates/index-template.xhtml">
    <ui:define name="content">
        <f:event type="preRenderView" listener="#{bookingFlowBean.recalculate}"/>

        <div style="height: 7em;"/>
        <b:jumbotron>
            <h3>Flight details</h3>
            <b:panel title="Flight details">
            <p><h:outputText value="#{bookingFlowBean.flight.flightCompany.name}"/></p>
            <p><h:outputText value="Departure: #{bookingFlowBean.flight.from.name} (#{bookingFlowBean.flight.from.code})"/></p>
            <p><h:outputText value="Destination: #{bookingFlowBean.flight.to.name} (#{bookingFlowBean.flight.to.code})"/></p>
            <p>Departure time: <h:outputText value="#{bookingFlowBean.flight.departureDateTime}">
                <f:convertDateTime pattern="dd/MM/yyyy hh:mm"/>
            </h:outputText></p>
            </b:panel>

            <h3>Passengers</h3>
            <ui:repeat value="#{bookingFlowBean.booking.passengers}" var="passenger" varStatus="status">
                <b:panel title="Passenger #{status.index+1}">
                <p><h:outputText value="Firstname: #{passenger.firstName}"/></p>
                <p><h:outputText value="Lastname: #{passenger.lastName}"/></p>
                <p><h:outputText value="Seat: #{passenger.seat.location}"/></p>
                <p>Date of birth: <h:outputText value="#{passenger.birthDate}">
                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                </h:outputText></p>
                </b:panel>
            </ui:repeat>

            <p><h:outputText value="Total: #{bookingFlowBean.price}" /></p>

            <b:form>
                <b:commandButton value="back" action="passengers" immediate="true"/>
                <b:commandButton id="confirm" value="confirm" action="paymentChoice"/>
                <b:defaultCommand target="confirm"/>
            </b:form>
        </b:jumbotron>
    </ui:define>
</ui:composition>


</html>
